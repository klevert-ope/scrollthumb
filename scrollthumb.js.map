{"version":3,"file":"scrollthumb.js","sources":["src/ScrollThumb.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\n\r\ntype ScrollThumbProps ={\r\n\t/**\r\n\t * The background color of the thumb.\r\n\t * Default is 'rgb (37, 99, 235)'.\r\n\t */\r\n\tcolor?: string;\r\n\t/**\r\n\t * The width of the thumb.\r\n\t * Default is 6 px.\r\n\t */\r\n\twidth?: number;\r\n\t/**\r\n\t * The height of the thumb.\r\n\t * Default is 64 px.\r\n\t */\r\n\theight?: number;\r\n\t/**\r\n\t * The position of the thumb, either 'left' or 'right'.\r\n\t */\r\n\tposition: 'left' | 'right';\r\n\t/**\r\n\t * The z-index of the thumb.\r\n\t * Default is 50.\r\n\t */\r\n\tzIndex?: number;\r\n\t/**\r\n\t * The border radius of the thumb.\r\n\t * Default is 2px.\r\n\t */\r\n\tborderRadius?: number;\r\n\t/**\r\n\t * The timeout duration for hiding the thumb in seconds.\r\n\t * If you wish to deactivate the hide time, use {'9999999'}.\r\n\t * The default duration is set to 2 seconds.\r\n\t */\r\n\thidetime?: number;\r\n};\r\n\r\n/**\r\n * ScrollThumb component designed to display a scroll thumb independently of the scrollbar.\r\n * The thumb hides when idle and reappears upon scrolling.\r\n * @component\r\n * @example\r\n * <ScrollThumb\r\n * color={'rgba(37, 99, 235, 1)'}\r\n * width={'6px'}\r\n * height={'64px'}\r\n * position={'right'}\r\n * zIndex={'100'}\r\n * borderRadius={'8px'}\r\n * hidetime={'3'}\r\n * />\r\n * @param {ScrollThumbProps} props - Properties specific to the ScrollThumb component.\r\n * @returns {ScrollThumbProps} - The properties of the ScrollThumb component.\r\n */\r\n\r\nconst ScrollThumb: (props: ScrollThumbProps) => JSX.Element = (props: ScrollThumbProps): JSX.Element => {\r\n\tconst {\r\n\t\tcolor,\r\n\t\twidth,\r\n\t\theight,\r\n\t\tposition,\r\n\t\tzIndex,\r\n\t\tborderRadius,\r\n\t\thidetime\r\n\t} = props;\r\n\r\n\tconst { scrollPercentage, isShowThumb, thumbElementRef } = useScrollThumb({\r\n\t\tTimeout: hidetime\r\n\t});\r\n\r\n\tconst thumbStyle: React.CSSProperties = {\r\n\t\tposition: 'fixed',\r\n\t\ttop: `${scrollPercentage}%`,\r\n\t\twidth: width || '6px',\r\n\t\theight: height || '64px',\r\n\t\tbackgroundColor: color || 'rgb(37, 99, 235)',\r\n\t\tzIndex: zIndex || '50',\r\n\t\tborderRadius: borderRadius || '2px',\r\n\t\ttransition: 'opacity 0.3s ease-in-out'\r\n\t};\r\n\r\n\tif (isShowThumb) {\r\n\t\tthumbStyle.opacity = '1';\r\n\t} else {\r\n\t\tthumbStyle.opacity = '0';\r\n\t}\r\n\r\n\tif (position === 'right') {\r\n\t\tthumbStyle.right = '3px';\r\n\t\tthumbStyle.left = 'auto';\r\n\t} else if (position === 'left') {\r\n\t\tthumbStyle.left = '3px';\r\n\t\tthumbStyle.right = 'auto';\r\n\t}else {\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<div style={thumbStyle} ref={thumbElementRef}></div>\r\n\t);\r\n};\r\n\r\nexport default ScrollThumb;\r\n\r\ntype useScrollThumbProps = {\r\n\tTimeout: number ;\r\n};\r\n\r\nfunction useScrollThumb({ Timeout }: useScrollThumbProps) {\r\n\tconst hideTimeout = (Timeout || 2) * 1000;\r\n\tconst [scrollPercentage, setScrollPercentage] = useState(0);\r\n\tconst [isShowThumb, setIsShowThumb] = useState(false);\r\n\tconst thumbElementRef = useRef<HTMLDivElement>(null);\r\n\tconst hideTimeoutRef = useRef<number | null>(null);\r\n\r\n\tconst calculateScrollPercentage = useCallback(() => {\r\n\t\tconst { scrollTop } = document.documentElement;\r\n\r\n\t\tif (!window.innerHeight || typeof window.innerHeight !== 'number' || window.innerHeight <= 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tconst maxScrollTop = document.documentElement.scrollHeight - window.innerHeight;\r\n\r\n\t\tlet offset = 0;\r\n\t\tif (maxScrollTop !== 0) {\r\n\t\t\tif (thumbElementRef && thumbElementRef.current) {\r\n\t\t\t\toffset = (100 * thumbElementRef.current.clientHeight) / window.innerHeight;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst percentage = (scrollTop / maxScrollTop) * (100 - offset);\r\n\r\n\t\treturn Math.min(percentage, 100);\r\n\t}, [thumbElementRef]);\r\n\r\n\tconst updateThumbPosition = useCallback(() => {\r\n\t\tsetScrollPercentage(calculateScrollPercentage());\r\n\t\tsetIsShowThumb(true);\r\n\r\n\t\tif (hideTimeoutRef.current) {\r\n\t\t\tclearTimeout(hideTimeoutRef.current);\r\n\t\t}\r\n\r\n\t\thideTimeoutRef.current = setTimeout(() => {\r\n\t\t\tsetIsShowThumb(false);\r\n\t\t}, hideTimeout)as undefined;\r\n\t}, [calculateScrollPercentage, hideTimeout]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst handleScroll = () => {\r\n\t\t\trequestAnimationFrame(updateThumbPosition);\r\n\r\n\t\t\tif (hideTimeoutRef.current) {\r\n\t\t\t\tclearTimeout(hideTimeoutRef.current);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst handleResize = () => {\r\n\t\t\tupdateThumbPosition();\r\n\t\t};\r\n\r\n\t\twindow.addEventListener('scroll', handleScroll);\r\n\t\twindow.addEventListener('resize', handleResize);\r\n\r\n\t\treturn () => {\r\n\t\t\tclearTimeout(hideTimeoutRef.current);\r\n\t\t\twindow.removeEventListener('scroll', handleScroll);\r\n\t\t\twindow.removeEventListener('resize', handleResize);\r\n\t\t};\r\n\t}, [updateThumbPosition]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isShowThumb) {\r\n\t\t\tconst translateY = `calc(${scrollPercentage}% - ${thumbElementRef.current?.clientHeight ?? 0}px)`;\r\n\r\n\t\t\tif (thumbElementRef.current) {\r\n\t\t\t\tthumbElementRef.current.style.transform = `matrix(1, 0, 0, 1, 0, ${translateY})`;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthumbElementRef.current.style.transform = \"none\";\r\n\t\t}\r\n\t}, [scrollPercentage, isShowThumb]);\r\n\r\n\treturn {\r\n\t\tscrollPercentage,\r\n\t\tisShowThumb,\r\n\t\tthumbElementRef\r\n\t};\r\n}\r\n"],"names":["useState","useRef","useCallback","useEffect"],"mappings":"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"}